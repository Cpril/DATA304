<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HW_7</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="HW_7_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW_7_files/libs/quarto-html/quarto.js"></script>
<script src="HW_7_files/libs/quarto-html/popper.min.js"></script>
<script src="HW_7_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW_7_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW_7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW_7_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW_7_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW_7_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW_7_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HW_7</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="hw-7" class="level2">
<h2 class="anchored" data-anchor-id="hw-7"><strong>HW 7</strong></h2>
<p><strong>Exercise 1 (Wilke on visualizing amounts)</strong> Read Chapter 6 of Wilke (<a href="https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019">2019</a>).</p>
<p>This chapter begins by discussing bar charts. Many of you gravitate toward bar plots. Beware the tendency to overuse them! But if you are going to use them, you should use them well.</p>
<ol type="a">
<li><p>List some guidelines/advice Wilke gives about creating bar charts.</p>
<ul>
<li><p>Rotating labels can result in ugly axis guide, a better solution is to swap x and y axis so that the bars run horizontally.</p></li>
<li><p>We need to pay attention to the order in which the bars are arranged.</p></li>
<li><p>A group bars figure is only primarily interested in specific differences in a particular group. It’s not good if we care more about the overall pattern.</p></li>
<li><p>Stacking is useful when the sum of the amounts represented by the individual stacked bars is in itself a meaningful amount.</p></li>
</ul></li>
<li><p>When is it not advised to use a bar chart? Why?</p>
<ul>
<li>When the value does not start at zero. Because the limitation of bars is that they need to start at zero, so that the bar length is proportional to the amount shown.</li>
</ul></li>
<li><p>What alternatives to bars are mentioned in this chapter?</p>
<ul>
<li>dots, colors.</li>
</ul></li>
<li><p>What guidance does Wilke give about whether or not to stack bars vs.&nbsp;dodge them (using an offset in Vega-Lite)?</p>
<ul>
<li><p>Stacked bars are useful when the sum of the amounts represented by the individual stacked bars is in itself a meaningful amount. Stacking is also appropriate when the individual bars represent counts.</p></li>
<li><p>Dodge bars are useful when we need to show a lot of information at once. It’s good if we are primarily interested in the differences in the levels of one variable among a particular group.</p></li>
</ul></li>
<li><p>Recreate Figure 6.3 in Vega-Lite. <a href="https://calvin-data304.netlify.app/data/cow-movies.csv">[CSV]</a></p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://calvin-data304.netlify.app/data/cow-movies.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"amount_millions"</span>] <span class="op">=</span> df[<span class="st">"amount"</span>] <span class="op">/</span> <span class="dv">1_000_000</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>chart_6_3 <span class="op">=</span> alt.Chart(df, width<span class="op">=</span><span class="dv">400</span>, height<span class="op">=</span><span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span>alt.Y(<span class="st">"title_short:N"</span>, title <span class="op">=</span> <span class="st">""</span>, sort <span class="op">=</span> <span class="st">"-x"</span>), </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  x<span class="op">=</span> alt.X(<span class="st">"amount_millions:Q"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  sort <span class="op">=</span> <span class="st">'ascending'</span>, </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  title <span class="op">=</span> <span class="st">"weekend gross (million USD)"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">80</span>]), </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>        axis<span class="op">=</span>alt.Axis(values<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>])</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        ) </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>chart_6_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-3-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-3-altair-viz.vega-embed details,
    #unnamed-chunk-3-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-3-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-cfae5d6efd432890bc15d450cd615123"}, "mark": {"type": "bar"}, "encoding": {"x": {"axis": {"values": [0, 20, 40, 60, 80]}, "field": "amount_millions", "scale": {"domain": [0, 80]}, "sort": "ascending", "title": "weekend gross (million USD)", "type": "quantitative"}, "y": {"field": "title_short", "sort": "-x", "title": "", "type": "nominal"}}, "height": 300, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-cfae5d6efd432890bc15d450cd615123": [{"rank": 1, "title": "Star Wars: The Last Jedi", "title_short": "Star Wars", "amount": 71565498, "amount_text": "$71,565,498", "amount_millions": 71.565498}, {"rank": 2, "title": "Jumanji: Welcome to the Jungle", "title_short": "Jumanji", "amount": 36169328, "amount_text": "$36,169,328", "amount_millions": 36.169328}, {"rank": 3, "title": "Pitch Perfect 3", "title_short": "Pitch Perfect 3", "amount": 19928525, "amount_text": "$19,928,525", "amount_millions": 19.928525}, {"rank": 4, "title": "The Greatest Showman", "title_short": "Greatest Showman", "amount": 8805843, "amount_text": "$8,805,843", "amount_millions": 8.805843}, {"rank": 5, "title": "Ferdinand", "title_short": "Ferdinand", "amount": 7316746, "amount_text": "$7,316,746", "amount_millions": 7.316746}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-3-altair-viz');
      vegaEmbed("#unnamed-chunk-3-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
<ol start="6" type="a">
<li>Recreate Figures 6.8 and 6.9 in Vega-Lite. <a href="https://calvin-data304.netlify.app/data/cow-income.csv">[CSV]</a></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_8 <span class="op">=</span> pd.read_csv(<span class="st">'https://calvin-data304.netlify.app/data/cow-income.csv'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>include_race <span class="op">=</span> [<span class="st">"asian"</span>, <span class="st">"white"</span>, <span class="st">"hispanic"</span>, <span class="st">"black"</span>]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df_8_filtered <span class="op">=</span> df_8[df_8[<span class="st">"race"</span>].isin(include_race)]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Chart_6_8 <span class="op">=</span> alt.Chart(df_8_filtered,width <span class="op">=</span> <span class="dv">400</span>, height <span class="op">=</span> <span class="dv">300</span>).mark_bar().encode(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">"race:N"</span>, title<span class="op">=</span><span class="st">""</span>, axis<span class="op">=</span>alt.Axis(labelAngle<span class="op">=</span><span class="dv">0</span>), sort <span class="op">=</span> include_race),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    xOffset<span class="op">=</span>alt.XOffset(<span class="st">"age:N"</span>),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">"median_income:Q"</span>, title<span class="op">=</span><span class="st">"median income (USD)"</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">100000</span>]), axis<span class="op">=</span>alt.Axis(values <span class="op">=</span> [<span class="dv">20000</span>, <span class="dv">40000</span>, <span class="dv">60000</span>, <span class="dv">80000</span>, <span class="dv">100000</span>],<span class="bu">format</span><span class="op">=</span><span class="st">"$,.0f"</span>)),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>alt.Color(<span class="st">"age:N"</span>, title<span class="op">=</span><span class="st">"age (yrs)"</span>, scale<span class="op">=</span>alt.Scale(scheme<span class="op">=</span><span class="st">"blues"</span>))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>Chart_6_8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-4-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-4-altair-viz.vega-embed details,
    #unnamed-chunk-4-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-4-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-1e1ef93a1f868a1823cd689b452a4d03"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "age", "scale": {"scheme": "blues"}, "title": "age (yrs)", "type": "nominal"}, "x": {"axis": {"labelAngle": 0}, "field": "race", "sort": ["asian", "white", "hispanic", "black"], "title": "", "type": "nominal"}, "xOffset": {"field": "age", "type": "nominal"}, "y": {"axis": {"format": "$,.0f", "values": [20000, 40000, 60000, 80000, 100000]}, "field": "median_income", "scale": {"domain": [0, 100000]}, "title": "median income (USD)", "type": "quantitative"}}, "height": 300, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-1e1ef93a1f868a1823cd689b452a4d03": [{"age": "15 to 24", "year": 2016, "median_income": 44588, "race": "white"}, {"age": "25 to 34", "year": 2016, "median_income": 65389, "race": "white"}, {"age": "35 to 44", "year": 2016, "median_income": 78093, "race": "white"}, {"age": "45 to 54", "year": 2016, "median_income": 82289, "race": "white"}, {"age": "55 to 64", "year": 2016, "median_income": 69387, "race": "white"}, {"age": "65 to 74", "year": 2016, "median_income": 52219, "race": "white"}, {"age": "> 74", "year": 2016, "median_income": 32203, "race": "white"}, {"age": "15 to 24", "year": 2016, "median_income": 45809, "race": "asian"}, {"age": "25 to 34", "year": 2016, "median_income": 80098, "race": "asian"}, {"age": "35 to 44", "year": 2016, "median_income": 100443, "race": "asian"}, {"age": "45 to 54", "year": 2016, "median_income": 98925, "race": "asian"}, {"age": "55 to 64", "year": 2016, "median_income": 91193, "race": "asian"}, {"age": "65 to 74", "year": 2016, "median_income": 56646, "race": "asian"}, {"age": "> 74", "year": 2016, "median_income": 26487, "race": "asian"}, {"age": "15 to 24", "year": 2016, "median_income": 30267, "race": "black"}, {"age": "25 to 34", "year": 2016, "median_income": 39176, "race": "black"}, {"age": "35 to 44", "year": 2016, "median_income": 49336, "race": "black"}, {"age": "45 to 54", "year": 2016, "median_income": 50103, "race": "black"}, {"age": "55 to 64", "year": 2016, "median_income": 40363, "race": "black"}, {"age": "65 to 74", "year": 2016, "median_income": 28697, "race": "black"}, {"age": "> 74", "year": 2016, "median_income": 22302, "race": "black"}, {"age": "15 to 24", "year": 2016, "median_income": 45080, "race": "hispanic"}, {"age": "25 to 34", "year": 2016, "median_income": 45876, "race": "hispanic"}, {"age": "35 to 44", "year": 2016, "median_income": 50245, "race": "hispanic"}, {"age": "45 to 54", "year": 2016, "median_income": 58103, "race": "hispanic"}, {"age": "55 to 64", "year": 2016, "median_income": 51996, "race": "hispanic"}, {"age": "65 to 74", "year": 2016, "median_income": 36704, "race": "hispanic"}, {"age": "> 74", "year": 2016, "median_income": 23797, "race": "hispanic"}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-4-altair-viz');
      vegaEmbed("#unnamed-chunk-4-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_9 <span class="op">=</span> pd.read_csv(<span class="st">'https://calvin-data304.netlify.app/data/cow-income.csv'</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>include_race<span class="op">=</span> [<span class="st">"asian"</span>, <span class="st">"white"</span>, <span class="st">"hispanic"</span>, <span class="st">"black"</span>]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df_9_filtered <span class="op">=</span> df_9[df_9[<span class="st">"race"</span>].isin(include_race)]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>df_9_filtered <span class="op">=</span> df_9_filtered.assign(age<span class="op">=</span>df_9_filtered[<span class="st">"age"</span>].<span class="bu">str</span>.replace(<span class="st">"to"</span>, <span class="st">"-"</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>Chart_6_9 <span class="op">=</span> alt.Chart(df_9_filtered,width <span class="op">=</span> <span class="dv">300</span>, height <span class="op">=</span> <span class="dv">200</span>).mark_bar().encode(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> alt.X(<span class="st">"age:O"</span>,title <span class="op">=</span> <span class="st">"age (years)"</span>, axis <span class="op">=</span> alt.Axis(labelAngle <span class="op">=</span> <span class="dv">0</span>)),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> alt.Y(<span class="st">"median_income:Q"</span>, title <span class="op">=</span> <span class="st">"median income (USD)"</span>, axis <span class="op">=</span> alt.Axis(<span class="bu">format</span> <span class="op">=</span> <span class="st">"$,.0f"</span>)),</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  facet <span class="op">=</span> alt.Facet(<span class="st">"race:N"</span>, title <span class="op">=</span> <span class="va">None</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>).configure_facet(columns <span class="op">=</span> <span class="dv">2</span>).resolve_scale(x <span class="op">=</span> <span class="st">"independent"</span>, y <span class="op">=</span> <span class="st">"shared"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>Chart_6_9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-5-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-5-altair-viz.vega-embed details,
    #unnamed-chunk-5-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-5-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}, "facet": {"columns": 2}}, "data": {"name": "data-f27c3f1b57800f653c74d9a89a948e0d"}, "mark": {"type": "bar"}, "encoding": {"facet": {"field": "race", "title": null, "type": "nominal"}, "x": {"axis": {"labelAngle": 0}, "field": "age", "title": "age (years)", "type": "ordinal"}, "y": {"axis": {"format": "$,.0f"}, "field": "median_income", "title": "median income (USD)", "type": "quantitative"}}, "height": 200, "resolve": {"scale": {"x": "independent", "y": "shared"}}, "width": 300, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-f27c3f1b57800f653c74d9a89a948e0d": [{"age": "15 - 24", "year": 2016, "median_income": 44588, "race": "white"}, {"age": "25 - 34", "year": 2016, "median_income": 65389, "race": "white"}, {"age": "35 - 44", "year": 2016, "median_income": 78093, "race": "white"}, {"age": "45 - 54", "year": 2016, "median_income": 82289, "race": "white"}, {"age": "55 - 64", "year": 2016, "median_income": 69387, "race": "white"}, {"age": "65 - 74", "year": 2016, "median_income": 52219, "race": "white"}, {"age": "> 74", "year": 2016, "median_income": 32203, "race": "white"}, {"age": "15 - 24", "year": 2016, "median_income": 45809, "race": "asian"}, {"age": "25 - 34", "year": 2016, "median_income": 80098, "race": "asian"}, {"age": "35 - 44", "year": 2016, "median_income": 100443, "race": "asian"}, {"age": "45 - 54", "year": 2016, "median_income": 98925, "race": "asian"}, {"age": "55 - 64", "year": 2016, "median_income": 91193, "race": "asian"}, {"age": "65 - 74", "year": 2016, "median_income": 56646, "race": "asian"}, {"age": "> 74", "year": 2016, "median_income": 26487, "race": "asian"}, {"age": "15 - 24", "year": 2016, "median_income": 30267, "race": "black"}, {"age": "25 - 34", "year": 2016, "median_income": 39176, "race": "black"}, {"age": "35 - 44", "year": 2016, "median_income": 49336, "race": "black"}, {"age": "45 - 54", "year": 2016, "median_income": 50103, "race": "black"}, {"age": "55 - 64", "year": 2016, "median_income": 40363, "race": "black"}, {"age": "65 - 74", "year": 2016, "median_income": 28697, "race": "black"}, {"age": "> 74", "year": 2016, "median_income": 22302, "race": "black"}, {"age": "15 - 24", "year": 2016, "median_income": 45080, "race": "hispanic"}, {"age": "25 - 34", "year": 2016, "median_income": 45876, "race": "hispanic"}, {"age": "35 - 44", "year": 2016, "median_income": 50245, "race": "hispanic"}, {"age": "45 - 54", "year": 2016, "median_income": 58103, "race": "hispanic"}, {"age": "55 - 64", "year": 2016, "median_income": 51996, "race": "hispanic"}, {"age": "65 - 74", "year": 2016, "median_income": 36704, "race": "hispanic"}, {"age": "> 74", "year": 2016, "median_income": 23797, "race": "hispanic"}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-5-altair-viz');
      vegaEmbed("#unnamed-chunk-5-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
<ol start="7" type="a">
<li>Recreate Figure 6.11 and explain why Figures 6.12 and 6.13 are labeled “bad”. <a href="https://calvin-data304.netlify.app/data/cow-gapminder.csv">[CSV]</a></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.read_csv(<span class="st">'https://calvin-data304.netlify.app/data/cow-gapminder.csv'</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df3_2007 <span class="op">=</span> df3[(df3[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">2007</span>) <span class="op">&amp;</span> (df3[<span class="st">"continent"</span>]<span class="op">==</span> <span class="st">"Americas"</span>)]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>Chart_6_11  <span class="op">=</span> alt.Chart(df3_2007,width<span class="op">=</span><span class="dv">400</span>, height<span class="op">=</span><span class="dv">300</span>).mark_point().encode(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> alt.X(<span class="st">"lifeExp:Q"</span>,title <span class="op">=</span> <span class="st">"life expectancy (years)"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>[<span class="dv">60</span>, <span class="dv">82</span>]), </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        axis<span class="op">=</span>alt.Axis(values<span class="op">=</span>[<span class="dv">60</span>,<span class="dv">65</span>, <span class="dv">70</span>, <span class="dv">75</span>,<span class="dv">80</span>], grid <span class="op">=</span> <span class="va">True</span>)),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> alt.Y(<span class="st">"country:N"</span>,title <span class="op">=</span> <span class="st">""</span>, sort <span class="op">=</span> <span class="st">"-x"</span>, axis <span class="op">=</span> alt.Axis(grid <span class="op">=</span> <span class="va">True</span>))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>Chart_6_11</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-6-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-6-altair-viz.vega-embed details,
    #unnamed-chunk-6-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-6-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-d98e4f0e834cda394de749e0f958e773"}, "mark": {"type": "point"}, "encoding": {"x": {"axis": {"grid": true, "values": [60, 65, 70, 75, 80]}, "field": "lifeExp", "scale": {"domain": [60, 82]}, "title": "life expectancy (years)", "type": "quantitative"}, "y": {"axis": {"grid": true}, "field": "country", "sort": "-x", "title": "", "type": "nominal"}}, "height": 300, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-d98e4f0e834cda394de749e0f958e773": [{"country": "Argentina", "continent": "Americas", "year": 2007, "lifeExp": 75.32, "pop": 40301927, "gdpPercap": 12779.37964}, {"country": "Bolivia", "continent": "Americas", "year": 2007, "lifeExp": 65.554, "pop": 9119152, "gdpPercap": 3822.137084}, {"country": "Brazil", "continent": "Americas", "year": 2007, "lifeExp": 72.39, "pop": 190010647, "gdpPercap": 9065.800825}, {"country": "Canada", "continent": "Americas", "year": 2007, "lifeExp": 80.653, "pop": 33390141, "gdpPercap": 36319.23501}, {"country": "Chile", "continent": "Americas", "year": 2007, "lifeExp": 78.553, "pop": 16284741, "gdpPercap": 13171.63885}, {"country": "Colombia", "continent": "Americas", "year": 2007, "lifeExp": 72.889, "pop": 44227550, "gdpPercap": 7006.580419}, {"country": "Costa Rica", "continent": "Americas", "year": 2007, "lifeExp": 78.782, "pop": 4133884, "gdpPercap": 9645.06142}, {"country": "Cuba", "continent": "Americas", "year": 2007, "lifeExp": 78.273, "pop": 11416987, "gdpPercap": 8948.102923}, {"country": "Dominican Republic", "continent": "Americas", "year": 2007, "lifeExp": 72.235, "pop": 9319622, "gdpPercap": 6025.374752}, {"country": "Ecuador", "continent": "Americas", "year": 2007, "lifeExp": 74.994, "pop": 13755680, "gdpPercap": 6873.262326}, {"country": "El Salvador", "continent": "Americas", "year": 2007, "lifeExp": 71.878, "pop": 6939688, "gdpPercap": 5728.353514}, {"country": "Guatemala", "continent": "Americas", "year": 2007, "lifeExp": 70.259, "pop": 12572928, "gdpPercap": 5186.050003}, {"country": "Haiti", "continent": "Americas", "year": 2007, "lifeExp": 60.916, "pop": 8502814, "gdpPercap": 1201.637154}, {"country": "Honduras", "continent": "Americas", "year": 2007, "lifeExp": 70.198, "pop": 7483763, "gdpPercap": 3548.330846}, {"country": "Jamaica", "continent": "Americas", "year": 2007, "lifeExp": 72.567, "pop": 2780132, "gdpPercap": 7320.880262}, {"country": "Mexico", "continent": "Americas", "year": 2007, "lifeExp": 76.195, "pop": 108700891, "gdpPercap": 11977.57496}, {"country": "Nicaragua", "continent": "Americas", "year": 2007, "lifeExp": 72.899, "pop": 5675356, "gdpPercap": 2749.320965}, {"country": "Panama", "continent": "Americas", "year": 2007, "lifeExp": 75.537, "pop": 3242173, "gdpPercap": 9809.185636}, {"country": "Paraguay", "continent": "Americas", "year": 2007, "lifeExp": 71.752, "pop": 6667147, "gdpPercap": 4172.838464}, {"country": "Peru", "continent": "Americas", "year": 2007, "lifeExp": 71.421, "pop": 28674757, "gdpPercap": 7408.905561}, {"country": "Puerto Rico", "continent": "Americas", "year": 2007, "lifeExp": 78.746, "pop": 3942491, "gdpPercap": 19328.70901}, {"country": "Trinidad and Tobago", "continent": "Americas", "year": 2007, "lifeExp": 69.819, "pop": 1056608, "gdpPercap": 18008.50924}, {"country": "United States", "continent": "Americas", "year": 2007, "lifeExp": 78.242, "pop": 301139947, "gdpPercap": 42951.65309}, {"country": "Uruguay", "continent": "Americas", "year": 2007, "lifeExp": 76.384, "pop": 3447496, "gdpPercap": 10611.46299}, {"country": "Venezuela", "continent": "Americas", "year": 2007, "lifeExp": 73.747, "pop": 26084662, "gdpPercap": 11415.80569}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-6-altair-viz');
      vegaEmbed("#unnamed-chunk-6-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
<p>6.12 uses bars, which are too long and draw attention away from the data. 6.13 is disordered, it’s hard to convey a clear message.</p>
<p><strong>Exercise 2 (A video presentation by Healy)</strong> &nbsp;</p>
<ol start="2" type="a">
<li>List at least three pieces of advice you can glean from this video that might help you design good graphics.</li>
</ol>
<ul>
<li>Good data is important for making good graphics, graphic style should work around the data</li>
<li>We should be aware of our visual habits when making graphics</li>
<li>a useful strategy for creating visualization is layer important information, highlight the information, and repeat these steps</li>
</ul>
<ol start="3" type="a">
<li>There are two figures in this video that come from Chapter 1 of Tufte (<a href="https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Tufte:2001:Visual">2001</a>). Did you spot them? Which figures are they?</li>
</ol>
<ul>
<li>nepolian army to Mascrow</li>
</ul>
<p><strong>Exercise 3 (Heat maps)</strong> &nbsp;</p>
<ol type="a">
<li>In Vega-Lite lingo, what makes something be a heat map?</li>
</ol>
<ul>
<li>a heat map is a graphic comprised of colored rectangles grouped together, in which color is maped to a variable.</li>
</ul>
<ol start="2" type="a">
<li>Recreate Figure 6.14 or 6.15 from Wilke (<a href="https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019">2019</a>) (your choice). Or get fancy and include an interactive element that let’s you select the year to order by. <a href="https://calvin-data304.netlify.app/data/cow-internet2.csv">[CSV]</a></li>
</ol>
<p>Figure 6.14</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df14 <span class="op">=</span> pd.read_csv(<span class="st">'https://calvin-data304.netlify.app/data/cow-internet2.csv'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df14_wrangled <span class="op">=</span> df14[df14[<span class="st">"year"</span>] <span class="op">&gt;</span> <span class="dv">1993</span>]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># fill in NA</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>df14_wrangled.fillna(<span class="dv">0</span>, inplace <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;string&gt;:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort order</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sorted_countries <span class="op">=</span> df14_wrangled[df14_wrangled[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">2016</span>].sort_values(<span class="st">"users"</span>, ascending <span class="op">=</span> <span class="va">False</span>)[<span class="st">"country"</span>].tolist()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>Chart_6_14 <span class="op">=</span> alt.Chart(df14_wrangled, width <span class="op">=</span> <span class="dv">500</span>, height <span class="op">=</span> <span class="dv">400</span>).mark_rect().encode(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> alt.X(<span class="st">"year:O"</span>,title <span class="op">=</span> <span class="st">""</span>, axis<span class="op">=</span>alt.Axis(values<span class="op">=</span>[<span class="dv">1995</span>,<span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2010</span>,<span class="dv">2015</span>], labelAngle <span class="op">=</span> <span class="dv">0</span>)),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> alt.Y(<span class="st">"country:N"</span>, title <span class="op">=</span> <span class="st">""</span>, axis <span class="op">=</span> alt.Axis(orient<span class="op">=</span><span class="st">"right"</span>), sort <span class="op">=</span> sorted_countries),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  color <span class="op">=</span> alt.Color(<span class="st">"users:Q"</span>, title <span class="op">=</span> <span class="st">"internet users / 100 people"</span>, legend<span class="op">=</span>alt.Legend(orient<span class="op">=</span><span class="st">"top"</span>, values <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">75</span>,<span class="dv">100</span>]),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  scale <span class="op">=</span> alt.Scale(scheme <span class="op">=</span> <span class="st">'inferno'</span>)))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>Chart_6_14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-7-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-7-altair-viz.vega-embed details,
    #unnamed-chunk-7-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-7-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-bc6cea12db612837d9cb4512410b52a3"}, "mark": {"type": "rect"}, "encoding": {"color": {"field": "users", "legend": {"orient": "top", "values": [0, 25, 50, 75, 100]}, "scale": {"scheme": "inferno"}, "title": "internet users / 100 people", "type": "quantitative"}, "x": {"axis": {"labelAngle": 0, "values": [1995, 2000, 2005, 2010, 2015]}, "field": "year", "title": "", "type": "ordinal"}, "y": {"axis": {"orient": "right"}, "field": "country", "sort": ["Iceland", "Norway", "United Kingdom", "Japan", "Canada", "Germany", "New Zealand", "France", "Israel", "United States", "Argentina", "Chile", "Italy", "Brazil", "Mexico", "South Africa", "China", "Algeria", "India", "Kenya"], "title": "", "type": "nominal"}}, "height": 400, "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-bc6cea12db612837d9cb4512410b52a3": [{"country": "Argentina", "year": 1994, "users": 0.043705951}, {"country": "Brazil", "year": 1994, "users": 0.037672709}, {"country": "Canada", "year": 1994, "users": 2.378693853}, {"country": "Chile", "year": 1994, "users": 0.141084507}, {"country": "China", "year": 1994, "users": 0.001168115}, {"country": "Germany", "year": 1994, "users": 0.922541043}, {"country": "Algeria", "year": 1994, "users": 0.000360674}, {"country": "France", "year": 1994, "users": 0.899867425}, {"country": "United Kingdom", "year": 1994, "users": 1.036609166}, {"country": "India", "year": 1994, "users": 0.001069562}, {"country": "Iceland", "year": 1994, "users": 6.794811784}, {"country": "Israel", "year": 1994, "users": 0.57696646}, {"country": "Italy", "year": 1994, "users": 0.192304619}, {"country": "Japan", "year": 1994, "users": 0.799684291}, {"country": "Kenya", "year": 1994, "users": 0.0}, {"country": "Mexico", "year": 1994, "users": 0.043339167}, {"country": "Norway", "year": 1994, "users": 4.152450292}, {"country": "New Zealand", "year": 1994, "users": 3.168718848}, {"country": "United States", "year": 1994, "users": 4.862780635}, {"country": "South Africa", "year": 1994, "users": 0.246905533}, {"country": "Argentina", "year": 1995, "users": 0.086277081}, {"country": "Brazil", "year": 1995, "users": 0.105138168}, {"country": "Canada", "year": 1995, "users": 4.163525253}, {"country": "Chile", "year": 1995, "users": 0.346980781}, {"country": "China", "year": 1995, "users": 0.00495471}, {"country": "Germany", "year": 1995, "users": 1.837737754}, {"country": "Algeria", "year": 1995, "users": 0.001768954}, {"country": "France", "year": 1995, "users": 1.637947245}, {"country": "United Kingdom", "year": 1995, "users": 1.895168284}, {"country": "India", "year": 1995, "users": 0.026228879}, {"country": "Iceland", "year": 1995, "users": 11.2158757}, {"country": "Israel", "year": 1995, "users": 0.93042297}, {"country": "Italy", "year": 1995, "users": 0.524412787}, {"country": "Japan", "year": 1995, "users": 1.594363148}, {"country": "Kenya", "year": 1995, "users": 0.000727482}, {"country": "Mexico", "year": 1995, "users": 0.10256419}, {"country": "Norway", "year": 1995, "users": 6.423220493}, {"country": "New Zealand", "year": 1995, "users": 4.88424078}, {"country": "United States", "year": 1995, "users": 9.237088297}, {"country": "South Africa", "year": 1995, "users": 0.676740104}, {"country": "Argentina", "year": 1996, "users": 0.141954704}, {"country": "Brazil", "year": 1996, "users": 0.450789179}, {"country": "Canada", "year": 1996, "users": 6.76023965}, {"country": "Chile", "year": 1996, "users": 0.68347561}, {"country": "China", "year": 1996, "users": 0.013081692}, {"country": "Germany", "year": 1996, "users": 3.054805234}, {"country": "Algeria", "year": 1996, "users": 0.001738533}, {"country": "France", "year": 1996, "users": 2.584033979}, {"country": "United Kingdom", "year": 1996, "users": 4.123650336}, {"country": "India", "year": 1996, "users": 0.046333977}, {"country": "Iceland", "year": 1996, "users": 14.80647932}, {"country": "Israel", "year": 1996, "users": 2.1683676}, {"country": "Italy", "year": 1996, "users": 1.023289903}, {"country": "Japan", "year": 1996, "users": 4.372981968}, {"country": "Kenya", "year": 1996, "users": 0.008839115}, {"country": "Mexico", "year": 1996, "users": 0.20040628}, {"country": "Norway", "year": 1996, "users": 18.25031077}, {"country": "New Zealand", "year": 1996, "users": 8.041899368}, {"country": "United States", "year": 1996, "users": 16.41935296}, {"country": "South Africa", "year": 1996, "users": 0.841882931}, {"country": "Argentina", "year": 1997, "users": 0.280339882}, {"country": "Brazil", "year": 1997, "users": 0.786079155}, {"country": "Canada", "year": 1997, "users": 15.07235736}, {"country": "Chile", "year": 1997, "users": 1.057092496}, {"country": "China", "year": 1997, "users": 0.032394861}, {"country": "Germany", "year": 1997, "users": 6.711087477}, {"country": "Algeria", "year": 1997, "users": 0.010268463}, {"country": "France", "year": 1997, "users": 4.255003872}, {"country": "United Kingdom", "year": 1997, "users": 7.385398957}, {"country": "India", "year": 1997, "users": 0.070767849}, {"country": "Iceland", "year": 1997, "users": 27.47886875}, {"country": "Israel", "year": 1997, "users": 4.399405482}, {"country": "Italy", "year": 1997, "users": 2.276737834}, {"country": "Japan", "year": 1997, "users": 9.16307714}, {"country": "Kenya", "year": 1997, "users": 0.034406051}, {"country": "Mexico", "year": 1997, "users": 0.62731154}, {"country": "Norway", "year": 1997, "users": 20.41788144}, {"country": "New Zealand", "year": 1997, "users": 14.6015244}, {"country": "United States", "year": 1997, "users": 21.61640097}, {"country": "South Africa", "year": 1997, "users": 1.632093791}, {"country": "Argentina", "year": 1998, "users": 0.83076668}, {"country": "Brazil", "year": 1998, "users": 1.477874959}, {"country": "Canada", "year": 1998, "users": 24.8974003}, {"country": "Chile", "year": 1998, "users": 1.662322022}, {"country": "China", "year": 1998, "users": 0.168540297}, {"country": "Germany", "year": 1998, "users": 9.877852428}, {"country": "Algeria", "year": 1998, "users": 0.020238555}, {"country": "France", "year": 1998, "users": 6.319778722}, {"country": "United Kingdom", "year": 1998, "users": 13.6699831}, {"country": "India", "year": 1998, "users": 0.139027329}, {"country": "Iceland", "year": 1998, "users": 36.2642065}, {"country": "Israel", "year": 1998, "users": 10.30706995}, {"country": "Italy", "year": 1998, "users": 4.558519565}, {"country": "Japan", "year": 1998, "users": 13.41404088}, {"country": "Kenya", "year": 1998, "users": 0.050261388}, {"country": "Mexico", "year": 1998, "users": 1.265783278}, {"country": "Norway", "year": 1998, "users": 22.56011255}, {"country": "New Zealand", "year": 1998, "users": 31.63626081}, {"country": "United States", "year": 1998, "users": 30.09319659}, {"country": "South Africa", "year": 1998, "users": 2.906220867}, {"country": "Argentina", "year": 1999, "users": 3.284481956}, {"country": "Brazil", "year": 1999, "users": 2.038732184}, {"country": "Canada", "year": 1999, "users": 36.18644004}, {"country": "Chile", "year": 1999, "users": 4.103419297}, {"country": "China", "year": 1999, "users": 0.708187957}, {"country": "Germany", "year": 1999, "users": 20.84598264}, {"country": "Algeria", "year": 1999, "users": 0.199523843}, {"country": "France", "year": 1999, "users": 9.125317889}, {"country": "United Kingdom", "year": 1999, "users": 21.29363827}, {"country": "India", "year": 1999, "users": 0.273224277}, {"country": "Iceland", "year": 1999, "users": 41.29456671}, {"country": "Israel", "year": 1999, "users": 13.43612191}, {"country": "Italy", "year": 1999, "users": 14.37841019}, {"country": "Japan", "year": 1999, "users": 21.39129031}, {"country": "Kenya", "year": 1999, "users": 0.114256028}, {"country": "Mexico", "year": 1999, "users": 1.857436221}, {"country": "Norway", "year": 1999, "users": 40.0}, {"country": "New Zealand", "year": 1999, "users": 41.49448266}, {"country": "United States", "year": 1999, "users": 35.84872446}, {"country": "South Africa", "year": 1999, "users": 4.116249583}, {"country": "Argentina", "year": 2000, "users": 7.038683086}, {"country": "Brazil", "year": 2000, "users": 2.870685159}, {"country": "Canada", "year": 2000, "users": 51.3}, {"country": "Chile", "year": 2000, "users": 16.6}, {"country": "China", "year": 2000, "users": 1.775913207}, {"country": "Germany", "year": 2000, "users": 30.2163466}, {"country": "Algeria", "year": 2000, "users": 0.491705679}, {"country": "France", "year": 2000, "users": 14.30792394}, {"country": "United Kingdom", "year": 2000, "users": 26.82175435}, {"country": "India", "year": 2000, "users": 0.52753245}, {"country": "Iceland", "year": 2000, "users": 44.47053382}, {"country": "Israel", "year": 2000, "users": 20.87379}, {"country": "Italy", "year": 2000, "users": 23.11087424}, {"country": "Japan", "year": 2000, "users": 29.99074036}, {"country": "Kenya", "year": 2000, "users": 0.318059714}, {"country": "Mexico", "year": 2000, "users": 5.081384153}, {"country": "Norway", "year": 2000, "users": 52.0}, {"country": "New Zealand", "year": 2000, "users": 47.37955654}, {"country": "United States", "year": 2000, "users": 43.07916264}, {"country": "South Africa", "year": 2000, "users": 5.348559732}, {"country": "Argentina", "year": 2001, "users": 9.780807285}, {"country": "Brazil", "year": 2001, "users": 4.528494869}, {"country": "Canada", "year": 2001, "users": 60.2}, {"country": "Chile", "year": 2001, "users": 19.1}, {"country": "China", "year": 2001, "users": 2.639650215}, {"country": "Germany", "year": 2001, "users": 31.65093942}, {"country": "Algeria", "year": 2001, "users": 0.646114017}, {"country": "France", "year": 2001, "users": 26.32590355}, {"country": "United Kingdom", "year": 2001, "users": 33.48109487}, {"country": "India", "year": 2001, "users": 0.660146377}, {"country": "Iceland", "year": 2001, "users": 49.39299537}, {"country": "Israel", "year": 2001, "users": 17.37862386}, {"country": "Italy", "year": 2001, "users": 27.22211698}, {"country": "Japan", "year": 2001, "users": 38.53206086}, {"country": "Kenya", "year": 2001, "users": 0.619782266}, {"country": "Mexico", "year": 2001, "users": 7.038023117}, {"country": "Norway", "year": 2001, "users": 64.0}, {"country": "New Zealand", "year": 2001, "users": 53.24101529}, {"country": "United States", "year": 2001, "users": 49.08083159}, {"country": "South Africa", "year": 2001, "users": 6.346619318}, {"country": "Argentina", "year": 2002, "users": 10.88212438}, {"country": "Brazil", "year": 2002, "users": 9.149425086}, {"country": "Canada", "year": 2002, "users": 61.59329927}, {"country": "Chile", "year": 2002, "users": 22.1}, {"country": "China", "year": 2002, "users": 4.595704331}, {"country": "Germany", "year": 2002, "users": 48.82}, {"country": "Algeria", "year": 2002, "users": 1.59164126}, {"country": "France", "year": 2002, "users": 30.18}, {"country": "United Kingdom", "year": 2002, "users": 56.48}, {"country": "India", "year": 2002, "users": 1.537875582}, {"country": "Iceland", "year": 2002, "users": 79.12}, {"country": "Israel", "year": 2002, "users": 17.76459906}, {"country": "Italy", "year": 2002, "users": 28.04}, {"country": "Japan", "year": 2002, "users": 46.59420112}, {"country": "Kenya", "year": 2002, "users": 1.207773885}, {"country": "Mexico", "year": 2002, "users": 11.9}, {"country": "Norway", "year": 2002, "users": 72.84}, {"country": "New Zealand", "year": 2002, "users": 59.08075328}, {"country": "United States", "year": 2002, "users": 58.78540388}, {"country": "South Africa", "year": 2002, "users": 6.710322437}, {"country": "Argentina", "year": 2003, "users": 11.91369655}, {"country": "Brazil", "year": 2003, "users": 13.2075861}, {"country": "Canada", "year": 2003, "users": 64.2}, {"country": "Chile", "year": 2003, "users": 25.47377889}, {"country": "China", "year": 2003, "users": 6.2}, {"country": "Germany", "year": 2003, "users": 55.9}, {"country": "Algeria", "year": 2003, "users": 2.195359731}, {"country": "France", "year": 2003, "users": 36.14}, {"country": "United Kingdom", "year": 2003, "users": 64.82}, {"country": "India", "year": 2003, "users": 1.686489971}, {"country": "Iceland", "year": 2003, "users": 83.14}, {"country": "Israel", "year": 2003, "users": 19.59339366}, {"country": "Italy", "year": 2003, "users": 29.04}, {"country": "Japan", "year": 2003, "users": 48.43526589}, {"country": "Kenya", "year": 2003, "users": 2.941902861}, {"country": "Mexico", "year": 2003, "users": 12.9}, {"country": "Norway", "year": 2003, "users": 78.13}, {"country": "New Zealand", "year": 2003, "users": 60.96253987}, {"country": "United States", "year": 2003, "users": 61.69711712}, {"country": "South Africa", "year": 2003, "users": 7.007691726}, {"country": "Argentina", "year": 2004, "users": 16.03668411}, {"country": "Brazil", "year": 2004, "users": 19.07367227}, {"country": "Canada", "year": 2004, "users": 65.95596346}, {"country": "Chile", "year": 2004, "users": 28.17791012}, {"country": "China", "year": 2004, "users": 7.3}, {"country": "Germany", "year": 2004, "users": 64.73}, {"country": "Algeria", "year": 2004, "users": 4.634475088}, {"country": "France", "year": 2004, "users": 39.15}, {"country": "United Kingdom", "year": 2004, "users": 65.61}, {"country": "India", "year": 2004, "users": 1.976136492}, {"country": "Iceland", "year": 2004, "users": 83.88}, {"country": "Israel", "year": 2004, "users": 22.77048553}, {"country": "Italy", "year": 2004, "users": 33.24}, {"country": "Japan", "year": 2004, "users": 62.39392963}, {"country": "Kenya", "year": 2004, "users": 3.023528042}, {"country": "Mexico", "year": 2004, "users": 14.1}, {"country": "Norway", "year": 2004, "users": 77.69}, {"country": "New Zealand", "year": 2004, "users": 61.84762781}, {"country": "United States", "year": 2004, "users": 64.75825648}, {"country": "South Africa", "year": 2004, "users": 8.425118683}, {"country": "Argentina", "year": 2005, "users": 17.72058337}, {"country": "Brazil", "year": 2005, "users": 21.02274725}, {"country": "Canada", "year": 2005, "users": 71.66}, {"country": "Chile", "year": 2005, "users": 31.17534703}, {"country": "China", "year": 2005, "users": 8.523257003}, {"country": "Germany", "year": 2005, "users": 68.71}, {"country": "Algeria", "year": 2005, "users": 5.843942092}, {"country": "France", "year": 2005, "users": 42.87}, {"country": "United Kingdom", "year": 2005, "users": 70.0}, {"country": "India", "year": 2005, "users": 2.388075}, {"country": "Iceland", "year": 2005, "users": 87.0}, {"country": "Israel", "year": 2005, "users": 25.19404242}, {"country": "Italy", "year": 2005, "users": 35.0}, {"country": "Japan", "year": 2005, "users": 66.9210661}, {"country": "Kenya", "year": 2005, "users": 3.101897702}, {"country": "Mexico", "year": 2005, "users": 17.21}, {"country": "Norway", "year": 2005, "users": 81.99}, {"country": "New Zealand", "year": 2005, "users": 62.72021237}, {"country": "United States", "year": 2005, "users": 67.96805292}, {"country": "South Africa", "year": 2005, "users": 7.48854253}, {"country": "Argentina", "year": 2006, "users": 20.9272021}, {"country": "Brazil", "year": 2006, "users": 28.17838018}, {"country": "Canada", "year": 2006, "users": 72.4}, {"country": "Chile", "year": 2006, "users": 34.49775117}, {"country": "China", "year": 2006, "users": 10.52315262}, {"country": "Germany", "year": 2006, "users": 72.16}, {"country": "Algeria", "year": 2006, "users": 7.375984956}, {"country": "France", "year": 2006, "users": 46.87}, {"country": "United Kingdom", "year": 2006, "users": 68.82}, {"country": "India", "year": 2006, "users": 2.805499865}, {"country": "Iceland", "year": 2006, "users": 89.51}, {"country": "Israel", "year": 2006, "users": 27.88107446}, {"country": "Italy", "year": 2006, "users": 37.99}, {"country": "Japan", "year": 2006, "users": 68.68527032}, {"country": "Kenya", "year": 2006, "users": 3.6}, {"country": "Mexico", "year": 2006, "users": 19.52}, {"country": "Norway", "year": 2006, "users": 82.55}, {"country": "New Zealand", "year": 2006, "users": 69.0}, {"country": "United States", "year": 2006, "users": 68.93119327}, {"country": "South Africa", "year": 2006, "users": 7.607139675}, {"country": "Argentina", "year": 2007, "users": 25.94663294}, {"country": "Brazil", "year": 2007, "users": 30.88}, {"country": "Canada", "year": 2007, "users": 73.2}, {"country": "Chile", "year": 2007, "users": 35.9}, {"country": "China", "year": 2007, "users": 16.0}, {"country": "Germany", "year": 2007, "users": 75.16}, {"country": "Algeria", "year": 2007, "users": 9.451190626}, {"country": "France", "year": 2007, "users": 66.09}, {"country": "United Kingdom", "year": 2007, "users": 75.09}, {"country": "India", "year": 2007, "users": 3.95}, {"country": "Iceland", "year": 2007, "users": 90.6}, {"country": "Israel", "year": 2007, "users": 48.12806219}, {"country": "Italy", "year": 2007, "users": 40.79}, {"country": "Japan", "year": 2007, "users": 74.3}, {"country": "Kenya", "year": 2007, "users": 4.4}, {"country": "Mexico", "year": 2007, "users": 20.81}, {"country": "Norway", "year": 2007, "users": 86.93}, {"country": "New Zealand", "year": 2007, "users": 69.76}, {"country": "United States", "year": 2007, "users": 75.0}, {"country": "South Africa", "year": 2007, "users": 8.065375174}, {"country": "Argentina", "year": 2008, "users": 28.11262348}, {"country": "Brazil", "year": 2008, "users": 33.83}, {"country": "Canada", "year": 2008, "users": 76.7}, {"country": "Chile", "year": 2008, "users": 37.3}, {"country": "China", "year": 2008, "users": 22.6}, {"country": "Germany", "year": 2008, "users": 78.0}, {"country": "Algeria", "year": 2008, "users": 10.18}, {"country": "France", "year": 2008, "users": 70.68}, {"country": "United Kingdom", "year": 2008, "users": 78.39}, {"country": "India", "year": 2008, "users": 4.38}, {"country": "Iceland", "year": 2008, "users": 91.0}, {"country": "Israel", "year": 2008, "users": 59.39}, {"country": "Italy", "year": 2008, "users": 44.53}, {"country": "Japan", "year": 2008, "users": 75.4}, {"country": "Kenya", "year": 2008, "users": 5.2}, {"country": "Mexico", "year": 2008, "users": 21.71}, {"country": "Norway", "year": 2008, "users": 90.57}, {"country": "New Zealand", "year": 2008, "users": 72.03}, {"country": "United States", "year": 2008, "users": 74.0}, {"country": "South Africa", "year": 2008, "users": 8.43}, {"country": "Argentina", "year": 2009, "users": 34.0}, {"country": "Brazil", "year": 2009, "users": 39.22}, {"country": "Canada", "year": 2009, "users": 80.3}, {"country": "Chile", "year": 2009, "users": 41.56}, {"country": "China", "year": 2009, "users": 28.9}, {"country": "Germany", "year": 2009, "users": 79.0}, {"country": "Algeria", "year": 2009, "users": 11.23}, {"country": "France", "year": 2009, "users": 71.58}, {"country": "United Kingdom", "year": 2009, "users": 83.56}, {"country": "India", "year": 2009, "users": 5.12}, {"country": "Iceland", "year": 2009, "users": 93.0}, {"country": "Israel", "year": 2009, "users": 63.12}, {"country": "Italy", "year": 2009, "users": 48.83}, {"country": "Japan", "year": 2009, "users": 78.0}, {"country": "Kenya", "year": 2009, "users": 6.1}, {"country": "Mexico", "year": 2009, "users": 26.34}, {"country": "Norway", "year": 2009, "users": 92.08}, {"country": "New Zealand", "year": 2009, "users": 79.7}, {"country": "United States", "year": 2009, "users": 71.0}, {"country": "South Africa", "year": 2009, "users": 10.0}, {"country": "Argentina", "year": 2010, "users": 45.0}, {"country": "Brazil", "year": 2010, "users": 40.65}, {"country": "Canada", "year": 2010, "users": 80.3}, {"country": "Chile", "year": 2010, "users": 45.0}, {"country": "China", "year": 2010, "users": 34.3}, {"country": "Germany", "year": 2010, "users": 82.0}, {"country": "Algeria", "year": 2010, "users": 12.5}, {"country": "France", "year": 2010, "users": 77.28}, {"country": "United Kingdom", "year": 2010, "users": 85.0}, {"country": "India", "year": 2010, "users": 7.5}, {"country": "Iceland", "year": 2010, "users": 93.39}, {"country": "Israel", "year": 2010, "users": 67.5}, {"country": "Italy", "year": 2010, "users": 53.68}, {"country": "Japan", "year": 2010, "users": 78.21}, {"country": "Kenya", "year": 2010, "users": 7.2}, {"country": "Mexico", "year": 2010, "users": 31.05}, {"country": "Norway", "year": 2010, "users": 93.39}, {"country": "New Zealand", "year": 2010, "users": 80.46}, {"country": "United States", "year": 2010, "users": 71.69}, {"country": "South Africa", "year": 2010, "users": 24.0}, {"country": "Argentina", "year": 2011, "users": 51.0}, {"country": "Brazil", "year": 2011, "users": 45.69}, {"country": "Canada", "year": 2011, "users": 83.0}, {"country": "Chile", "year": 2011, "users": 52.24960729}, {"country": "China", "year": 2011, "users": 38.3}, {"country": "Germany", "year": 2011, "users": 81.26999954}, {"country": "Algeria", "year": 2011, "users": 14.9}, {"country": "France", "year": 2011, "users": 77.81999899}, {"country": "United Kingdom", "year": 2011, "users": 85.37999855}, {"country": "India", "year": 2011, "users": 10.07}, {"country": "Iceland", "year": 2011, "users": 94.8196868}, {"country": "Israel", "year": 2011, "users": 68.87387799}, {"country": "Italy", "year": 2011, "users": 54.3899983}, {"country": "Japan", "year": 2011, "users": 79.05411352}, {"country": "Kenya", "year": 2011, "users": 8.8}, {"country": "Mexico", "year": 2011, "users": 37.17629541}, {"country": "Norway", "year": 2011, "users": 93.48998265}, {"country": "New Zealand", "year": 2011, "users": 81.23}, {"country": "United States", "year": 2011, "users": 69.72946076}, {"country": "South Africa", "year": 2011, "users": 33.97}, {"country": "Argentina", "year": 2012, "users": 55.8}, {"country": "Brazil", "year": 2012, "users": 48.56}, {"country": "Canada", "year": 2012, "users": 83.0}, {"country": "Chile", "year": 2012, "users": 55.05}, {"country": "China", "year": 2012, "users": 42.30011749}, {"country": "Germany", "year": 2012, "users": 82.34999847}, {"country": "Algeria", "year": 2012, "users": 18.2}, {"country": "France", "year": 2012, "users": 81.44}, {"country": "United Kingdom", "year": 2012, "users": 87.47999842}, {"country": "India", "year": 2012, "users": 12.58006091}, {"country": "Iceland", "year": 2012, "users": 96.20979955}, {"country": "Israel", "year": 2012, "users": 70.8}, {"country": "Italy", "year": 2012, "users": 55.82999799}, {"country": "Japan", "year": 2012, "users": 79.4964}, {"country": "Kenya", "year": 2012, "users": 10.5}, {"country": "Mexico", "year": 2012, "users": 39.75}, {"country": "Norway", "year": 2012, "users": 94.64997805}, {"country": "New Zealand", "year": 2012, "users": 81.64447018}, {"country": "United States", "year": 2012, "users": 74.7}, {"country": "South Africa", "year": 2012, "users": 41.0}, {"country": "Argentina", "year": 2013, "users": 59.9}, {"country": "Brazil", "year": 2013, "users": 51.04}, {"country": "Canada", "year": 2013, "users": 85.8}, {"country": "Chile", "year": 2013, "users": 58.0}, {"country": "China", "year": 2013, "users": 45.8}, {"country": "Germany", "year": 2013, "users": 84.17}, {"country": "Algeria", "year": 2013, "users": 22.5}, {"country": "France", "year": 2013, "users": 81.9198}, {"country": "United Kingdom", "year": 2013, "users": 89.8441}, {"country": "India", "year": 2013, "users": 15.1}, {"country": "Iceland", "year": 2013, "users": 96.5468}, {"country": "Israel", "year": 2013, "users": 70.25031195}, {"country": "Italy", "year": 2013, "users": 58.4593}, {"country": "Japan", "year": 2013, "users": 88.21942891}, {"country": "Kenya", "year": 2013, "users": 13.0}, {"country": "Mexico", "year": 2013, "users": 43.46}, {"country": "Norway", "year": 2013, "users": 95.0534}, {"country": "New Zealand", "year": 2013, "users": 82.78}, {"country": "United States", "year": 2013, "users": 71.4}, {"country": "South Africa", "year": 2013, "users": 46.5}, {"country": "Argentina", "year": 2014, "users": 64.7}, {"country": "Brazil", "year": 2014, "users": 54.55100188}, {"country": "Canada", "year": 2014, "users": 87.12}, {"country": "Chile", "year": 2014, "users": 61.11}, {"country": "China", "year": 2014, "users": 47.9}, {"country": "Germany", "year": 2014, "users": 86.19}, {"country": "Algeria", "year": 2014, "users": 29.5}, {"country": "France", "year": 2014, "users": 83.75}, {"country": "United Kingdom", "year": 2014, "users": 91.61}, {"country": "India", "year": 2014, "users": 21.0}, {"country": "Iceland", "year": 2014, "users": 98.16}, {"country": "Israel", "year": 2014, "users": 75.01775316}, {"country": "Italy", "year": 2014, "users": 55.63846022}, {"country": "Japan", "year": 2014, "users": 89.10683302}, {"country": "Kenya", "year": 2014, "users": 16.5}, {"country": "Mexico", "year": 2014, "users": 44.39}, {"country": "Norway", "year": 2014, "users": 96.3}, {"country": "New Zealand", "year": 2014, "users": 85.5}, {"country": "United States", "year": 2014, "users": 73.0}, {"country": "South Africa", "year": 2014, "users": 49.0}, {"country": "Argentina", "year": 2015, "users": 68.04306411}, {"country": "Brazil", "year": 2015, "users": 58.32795173}, {"country": "Canada", "year": 2015, "users": 88.47}, {"country": "Chile", "year": 2015, "users": 64.289}, {"country": "China", "year": 2015, "users": 50.3}, {"country": "Germany", "year": 2015, "users": 87.5898}, {"country": "Algeria", "year": 2015, "users": 38.2}, {"country": "France", "year": 2015, "users": 84.6945}, {"country": "United Kingdom", "year": 2015, "users": 92.0003}, {"country": "India", "year": 2015, "users": 26.0}, {"country": "Iceland", "year": 2015, "users": 98.2}, {"country": "Israel", "year": 2015, "users": 77.35208966}, {"country": "Italy", "year": 2015, "users": 58.14173496}, {"country": "Japan", "year": 2015, "users": 91.05802839}, {"country": "Kenya", "year": 2015, "users": 21.0}, {"country": "Mexico", "year": 2015, "users": 57.43104299}, {"country": "Norway", "year": 2015, "users": 96.8103}, {"country": "New Zealand", "year": 2015, "users": 88.22288882}, {"country": "United States", "year": 2015, "users": 74.55420245}, {"country": "South Africa", "year": 2015, "users": 51.91911572}, {"country": "Argentina", "year": 2016, "users": 70.15076431}, {"country": "Brazil", "year": 2016, "users": 59.68274736}, {"country": "Canada", "year": 2016, "users": 89.84}, {"country": "Chile", "year": 2016, "users": 66.01}, {"country": "China", "year": 2016, "users": 53.2}, {"country": "Germany", "year": 2016, "users": 89.64710059}, {"country": "Algeria", "year": 2016, "users": 42.94552688}, {"country": "France", "year": 2016, "users": 85.62219995}, {"country": "United Kingdom", "year": 2016, "users": 94.77580063}, {"country": "India", "year": 2016, "users": 29.54716289}, {"country": "Iceland", "year": 2016, "users": 98.2400163}, {"country": "Israel", "year": 2016, "users": 79.77879126}, {"country": "Italy", "year": 2016, "users": 61.32425277}, {"country": "Japan", "year": 2016, "users": 92.0}, {"country": "Kenya", "year": 2016, "users": 26.0}, {"country": "Mexico", "year": 2016, "users": 59.540446}, {"country": "Norway", "year": 2016, "users": 97.29820367}, {"country": "New Zealand", "year": 2016, "users": 88.47018635}, {"country": "United States", "year": 2016, "users": 76.17673698}, {"country": "South Africa", "year": 2016, "users": 54.0}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-7-altair-viz');
      vegaEmbed("#unnamed-chunk-7-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
<ol start="3" type="a">
<li>At around 20:10, Healy presents a possible problem with heat maps, what is it?</li>
</ol>
<ul>
<li>Our eyes interpret the relative color differences in different ways because each colored squares are surrounded by other colored squares.</li>
</ul>
<ol start="4" type="a">
<li>But starting at around 44:12, he presents a heat map as a “show pony”. Why isn’t the problem presented earlier an issue here? Is it an issue in the figure you make in part b? Why or why not?</li>
</ol>
<ul>
<li>In this “show pony” graph, we are interested in the bigger larger pattern, not the indivisual piece.</li>
<li>I think whether it is an issue in the figure I made in part b depends on what we want to interpret. If we are interested to show a bigger larger pattern, it is useful and doesn’t have an issue. However, if we want to compare indivisual squares, then it has the issue that the olored squares are surrounded by other colored squares, therefore is not very good.</li>
</ul>
<p><strong>Exercise 4 (Pie charts)</strong> &nbsp;</p>
<ol type="a">
<li>What does Healy have to say about pie charts in his video?</li>
</ol>
<ul>
<li>It’s hard for our eyes to decode angles and relative areas.</li>
</ul>
<ol start="2" type="a">
<li>How does that compare to what Wilke says in Section 10.1 of Wilke (<a href="https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019">2019</a>)?</li>
</ol>
<ul>
<li><p>Wilke also noted that pie chart doesn’t allow easy visual comparison of relative porportions.</p></li>
<li><p>In addition, Wilke argues that pie chart does not work well when the whole is broken into many pieces, or for visualization of many sets of proportions or time series of proportions.</p></li>
<li><p>However, Wilke noted that pie chart can clearly visualizes the data as proportions of a whole,emphasize simple fractions, and looks visually appealing for small datasets.</p></li>
</ul>
<ol start="3" type="a">
<li>What alternatives does Wilke present to pie charts and in what situations does he favor each?</li>
</ol>
<ul>
<li><p>alternatives: stacked bars, side-by-side bars.</p></li>
<li><p>Stacked bars: Stacked bars, like pie chart can visualize the data as proportion of a whole, but in addition can work well fo visualization of many sets of porportions or time series of proportions, however, it does not look visually appealing for small dataset nor emphasizes simple fractions</p></li>
<li><p>Side-by-side bars: Similar with pie chart, side-by-side bars looks visually appealing even for small datasets, in addition, it allows visual comparison of relative proportions and work well when the whole is broken into many pieves which pie chart cannot do. However, it cannot clearly visualizes the data as proportions of a whole, and cannot visually emphasizes simple fractions like pie chart can do.</p></li>
</ul>
<ol start="4" type="a">
<li>Recreate Figure 10.1 of Wilke (<a href="https://calvin-data304.netlify.app/hw/hw07-perception-and.html#ref-Wilke:2019">2019</a>).</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'party'</span>: [<span class="st">'FDP'</span>,<span class="st">'SPD'</span>,<span class="st">'CDU/CSU'</span>],</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'seats'</span>: [<span class="dv">39</span>,<span class="dv">214</span>,<span class="dv">243</span>]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>Order <span class="op">=</span> [<span class="st">'FDP'</span>,<span class="st">'SPD'</span>,<span class="st">'CDU/CSU'</span>]</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'order'</span>] <span class="op">=</span> pd.Categorical(data[<span class="st">'party'</span>], categories<span class="op">=</span>Order, ordered<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> alt.Chart(data, width <span class="op">=</span> <span class="dv">300</span>, height <span class="op">=</span> <span class="dv">300</span>).mark_arc().encode(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  theta <span class="op">=</span> alt.Theta(<span class="st">"seats:Q"</span>).stack(<span class="va">True</span>), </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  color <span class="op">=</span> alt.Color(<span class="st">"party:N"</span>, legend <span class="op">=</span> <span class="va">None</span>, sort <span class="op">=</span> Order),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  order <span class="op">=</span> alt.Order(<span class="st">"order:O"</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>pie <span class="op">=</span> base.mark_arc(outerRadius<span class="op">=</span><span class="dv">120</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>text_chart <span class="op">=</span> base.mark_text(radius <span class="op">=</span> <span class="dv">80</span>, size <span class="op">=</span> <span class="dv">25</span>).encode(</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> <span class="st">"seats:Q"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  color <span class="op">=</span> alt.value(<span class="st">"white"</span>)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>text_chart2 <span class="op">=</span> base.mark_text(radius <span class="op">=</span> <span class="dv">140</span>, size <span class="op">=</span> <span class="dv">10</span>).encode(</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> <span class="st">"party:N"</span>,</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  color <span class="op">=</span> alt.value(<span class="st">"black"</span>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>Total_chart <span class="op">=</span> pie <span class="op">+</span> text_chart <span class="op">+</span> text_chart2</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>Total_chart</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">



  <style>
    #unnamed-chunk-8-altair-viz.vega-embed {
      width: 100%;
      display: flex;
    }

    #unnamed-chunk-8-altair-viz.vega-embed details,
    #unnamed-chunk-8-altair-viz.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>


  <div id="unnamed-chunk-8-altair-viz"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "layer": [{"mark": {"type": "arc", "outerRadius": 120}, "encoding": {"color": {"field": "party", "legend": null, "sort": ["FDP", "SPD", "CDU/CSU"], "type": "nominal"}, "order": {"field": "order", "type": "ordinal"}, "theta": {"field": "seats", "stack": true, "type": "quantitative"}}}, {"mark": {"type": "text", "radius": 80, "size": 25}, "encoding": {"color": {"value": "white"}, "order": {"field": "order", "type": "ordinal"}, "text": {"field": "seats", "type": "quantitative"}, "theta": {"field": "seats", "stack": true, "type": "quantitative"}}}, {"mark": {"type": "text", "radius": 140, "size": 10}, "encoding": {"color": {"value": "black"}, "order": {"field": "order", "type": "ordinal"}, "text": {"field": "party", "type": "nominal"}, "theta": {"field": "seats", "stack": true, "type": "quantitative"}}}], "data": {"name": "data-e50b58d7dca9c689428a97c69c08a410"}, "height": 300, "width": 300, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-e50b58d7dca9c689428a97c69c08a410": [{"party": "FDP", "seats": 39, "order": "FDP"}, {"party": "SPD", "seats": 214, "order": "SPD"}, {"party": "CDU/CSU", "seats": 243, "order": "CDU/CSU"}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('unnamed-chunk-8-altair-viz');
      vegaEmbed("#unnamed-chunk-8-altair-viz", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>